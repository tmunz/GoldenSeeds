@import "../base.styl";
.input {
  $height=34;
  $font-size=10;
  $range-height=$height - 10;
  position: relative;
  padding-top: 4px;
  height: ($height + 4)px;
  font-size: ($font-size)px;
  &>label {
    color: $color-label;
    position: absolute;
    white-space: nowrap;
    z-index: 2;
    left: 20px;
    top: ($height/2 - 2)px;
    padding: 0 2px;
    background: $color-background;
    pointer-events: none;
    transition: transform 0.2s ease;
    transform: translateY(-($height/2)px);
    &.input-empty {
      color: $color-text;
      background: transparent;
      transform: translateY(0);
    }
  }
  .input-container>.input-value {
    position: relative;
    transition: width 0.6s ease, height 0.6s ease, padding 0.6s ease;
    &>output {
      position: absolute;
      pointer-events: none;
      width: 100px;
      top: ($height/2 - 4)px;
      left: 20px;
      white-space: nowrap;
      text-overflow: ellipsis;
      max-width: 100px;
      overflow: hidden;
      display: block;
    }
    &:focus {
      &>output {
        color: $color-accent;
      }
    }
    &>input {
      outline: none;
      width: 100%;
      height: 100%;
      box-sizing: border-box;
      border: 1px solid $color-border;
      border-radius: 99999px;
      &.invalid {
        border-color: $color-error !important;
      }
    }
  }
  &.text {
    .input-container>.input-value {
      width: 180px;
      height: ($height)px;
      padding: 0;
      &>input {
        background-image: linear-gradient(to bottom, $color-background 0, lighten($color-background, 5) 100%);
        box-shadow: inset 0 1px 0 0 lighten($color-background, 5), inset 0 -1px 0 0 lighten($color-background, 25);
        padding: 11px 20px 9px;
        border-radius: ($height)px;
        color: $color-text;
        font-size: ($font-size+2)px;
        &:focus {
          border-color: $color-accent;
          &+label {
            color: $color-accent;
          }
        }
      }
    }
  }
  &.range {
    &>label {
      color: $color-link;
    }
    .input-container>.input-value {
      width: 134px;
      height: ($range-height)px;
      padding: 5px;
      &>input {
        appearance: none;
        tap-decoration-color: transparent;
        border-color: $color-background;
        box-shadow: inset 0 1px 0 0 darken($color-text, 50), inset 0 -1px 0 0 darken($color-text, 25);
        background: lighten($color-background, 15);
        color-input($color) {
          background-image: linear-gradient(to right, lighten($color-background, 15) 0%, darken($color, 35) 100%);
        }
        &.color-input-red {
          color-input(#ff0000);
        }
        &.color-input-green {
          color-input(#00ff00);
        }
        &.color-input-blue {
          color-input(#0000ff);
        }
        &::-ms-track,
        &::-moz-range-track {
          border: inherit;
          color: transparent;
          background: transparent;
        }
        &::-ms-fill-lower,
        &::-ms-fill-upper {
          background: transparent;
        }
        &::-ms-tooltip {
          display: none;
        }
        &::-moz-range-track {
          background: transparent;
        }
        thumb($color=$color-link, $cursor=grab) {
          _thumb($color) {
            cursor: $cursor;
            appearance: none;
            width: 40px;
            height: ($range-height)px;
            border: none;
            border-radius: ($range-height)px;
            background-image: linear-gradient(to bottom, $color 0, darken($color, 50) 100%);
          }
          &::-webkit-slider-thumb {
            _thumb($color);
          }
          &::-ms-thumb {
            _thumb($color);
          }
          &::-moz-range-thumb {
            _thumb($color);
          }
        }
        thumb();
        &:focus {
          thumb($color-accent);
        }
        &.focus {
          thumb($color-accent, grabbing);
        }
        &.range-invalid {
          thumb($color-text);
        }
      }
    }
  }
}